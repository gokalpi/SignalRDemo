@page
@model IndexModel
@{
    ViewData["Title"] = "Home page";
}
<h1 class="display-4 text-center m-4">SignalR Chat Demo</h1>

<div class="row row-cols-1 row-cols-lg-2">
    <div class="col mb-4">
        <div class="card border-secondary mb-4 shadow-sm">
            <div class="card-header">
                <h4 class="my-0 font-weight-normal">Chat</h4>
            </div>
            <div class="card-body">
                <form class="needs-validation" novalidate>
                    <div class="form-group row">
                        <label for="user" class="col-sm-3 col-form-label">User</label>
                        <div class="col-sm-6">
                            <input type="text" class="form-control" id="user" name="user" required>
                            <span class="invalid-feedback">User is required.</span>
                        </div>
                        <div class="col-sm-3">
                            <button type="button" class="btn btn-primary mr-3" id="connectButton" disabled>Connect</button>
                            <button type="button" class="btn btn-danger mr-3" id="disconnectButton" style="display: none">Disconnect</button>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label for="group" class="col-sm-3 col-form-label">Group</label>
                        <div class="col-sm-6">
                            <input type="text" class="form-control" id="group" name="group" disabled required>
                            <span class="invalid-feedback">Group name is required</span>
                        </div>
                        <div class="col-sm-3">
                            <button type="button" class="btn btn-primary mr-3" id="joinButton" disabled>Join</button>
                            <button type="button" class="btn btn-danger" id="leaveButton" style="display: none">Leave</button>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label for="sendTo" class="col-sm-3 col-form-label">Send to</label>
                        <div class="col-sm-9 text-left">
                            <div class="custom-control custom-radio">
                                <input type="radio" id="toEveryone" name="sendTo" class="custom-control-input" value="All" disabled checked required>
                                <label class="custom-control-label" for="toEveryone">Everyone</label>
                            </div>
                            <div class="custom-control custom-radio">
                                <input type="radio" id="toMyself" name="sendTo" class="custom-control-input" value="Myself" disabled required>
                                <label class="custom-control-label" for="toMyself">Myself</label>
                            </div>
                            <div class="custom-control custom-radio">
                                <input type="radio" id="toGroup" name="sendTo" class="custom-control-input" value="Group" disabled required>
                                <label class="custom-control-label" for="toGroup">Group</label>
                            </div>
                            <div class="row ml-0 mr-0">
                                <div class="col-sm-3 custom-control custom-radio">
                                    <input type="radio" id="toRecipient" name="sendTo" class="custom-control-input" value="Recipient" disabled required>
                                    <label class="custom-control-label" for="toRecipient">Recipient</label>
                                </div>
                                <div class="col-sm-9 pr-0">
                                    <select id="recipient" class="form-control" disabled>
                                        <option value="">Select a recipient</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label for="message" class="col-sm-3 col-form-label">Message</label>
                        <div class="col-sm-9">
                            <textarea class="form-control" id="message" disabled required></textarea>
                            <span class="invalid-feedback">Please enter your message.</span>
                        </div>
                    </div>
                </form>
            </div>
            <div class="card-footer">
                <div class="col-sm-9 offset-sm-3">
                    <button type="button" class="btn btn-primary btn-block" id="sendButton" disabled>Send Message</button>
                </div>
            </div>
        </div>
    </div>
    <div class="col mb-4">
        <div class="card border-secondary mb-4 shadow-sm">
            <div class="card-header">
                <h4 class="my-0 font-weight-normal">Messages</h4>
            </div>
            <div class="card-body">
                <ul id="messagesList"></ul>
            </div>
            <div class="card-footer py-2">
                <small class="text-muted">Last updated <span id="messagesLastUpdate"></span></small>
            </div>
        </div>
    </div>
</div>

<div class="card border-secondary mb-4 shadow-sm">
    <div class="card-header">
        <h4 class="my-0 font-weight-normal">Status</h4>
    </div>
    <div class="card-body text-secondary">
        <ul id="statusList"></ul>
    </div>
    <div class="card-footer py-2">
        <small class="text-muted">Last updated <span id="statusLastUpdate"></span></small>
    </div>
</div>

@section Scripts
{
    <environment include="Development">
        <script src="~/lib/signalr/dist/browser/signalr.js"></script>
        <script src="~/lib/momentjs/moment-with-locales.js"></script>
        <script src="~/js/chat.js"></script>
    </environment>
    <environment exclude="Development">
        <script src="~/lib/signalr/dist/browser/signalr.min.js"></script>
        <script src="~/lib/momentjs/moment-with-locales.min.js"></script>
        <script src="~/js/chat.min.js"></script>
    </environment>
}